<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gi Fashion</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Yesteryear&display=swap" rel="stylesheet" />
  <style>
    /* estilos básicos para modal e botões dentro do modal */
    #auth-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.4);
      z-index: 3000;
      justify-content: center;
      align-items: center;
    }

    #auth-modal > div {
      background: #fff0f5;
      padding: 30px 25px;
      border-radius: 15px;
      width: 340px;
      position: relative;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }

    #auth-modal button {
      cursor: pointer;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    #auth-modal .tabs {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    #auth-modal .tabs button {
      padding: 8px 16px;
      background: #f0d6df;
      color: #a61e4d;
    }

    #auth-modal .tabs button.active {
      background: #c94f7c;
      color: #fff;
    }

    #auth-modal input,
    #auth-modal form input {
      padding: 10px;
      border: 1px solid #f0d6df;
      border-radius: 8px;
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 12px;
      font-size: 14px;
    }

    #auth-modal .btn {
      width: 100%;
      background-color: #c94f7c;
      color: #fff;
      padding: 12px;
      font-size: 16px;
      font-weight: 700;
      margin-top: 15px;
      border-radius: 8px;
    }

    #auth-modal .close-btn {
      position: absolute;
      top: 8px;
      right: 10px;
      font-size: 18px;
      background: none;
      border: none;
      color: #c94f7c;
    }

    /* Notificação */
    #notificacao {
      display: none;
      position: fixed;
      top: 20px;
      right: 20px;
      background: #fff0f5;
      border: 1px solid #ffb6c1;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      z-index: 2000;
      color: #c94f7c;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #notificacao button {
      background: none;
      border: none;
      font-weight: bold;
      font-size: 16px;
      color: #c94f7c;
      cursor: pointer;
    }

    /* Botões de carrinho */
    .btn-carrinho {
      cursor: pointer;
      background-color: #c94f7c;
      color: white;
      border: none;
      padding: 10px 12px;
      border-radius: 6px;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }

    .btn-carrinho:hover {
      background-color: #a61e4d;
    }
  </style>
</head>

<body>
  <header>
    <div style="position:absolute; top:15px; right:80px; display:flex; gap:10px;">
      <button onclick="abrirAuthModal(); mostrarLogin()" class="btn-acesso">Login</button>
<button onclick="abrirAuthModal(); mostrarCadastro()" class="btn-acesso">Cadastrar</button>
    </div>
    <div id="cart-icon" title="Ver carrinho" onclick="mostrarCarrinho()" style="cursor:pointer; position: absolute; top: 15px; right: 20px; font-size: 28px; color: #fff;">
      🛒
      <span id="cart-count" style="background:#a61e4d; color:#fff; border-radius:50%; padding:2px 7px; font-size:14px; vertical-align: top; margin-left: 4px;">0</span>
    </div>
    <div class="logo-container">
      <h1 class="logo">Gi Fashion</h1>
    </div>
    <nav>
      <a href="#inicio" onclick="mostrarTodos()">Início</a>
      <a href="#" onclick="toggleColecao(event)">Coleção</a>
      <a href="#depoimentos">Depoimentos</a>
      <a href="#contato">Contato</a>
    </nav>
  </header>

  <div id="colecao-menu" class="colecao-oculto">
  <ul>
    <li onclick="mostrarCategoria('saias')">Saias</li>
    <li onclick="mostrarCategoria('blusas')">Blusas</li>
    <li onclick="mostrarCategoria('vestidos')">Vestidos</li>
    <li onclick="mostrarCategoria('camisas')">Camisas</li>
  </ul>
</div>

  <section id="inicio">
    <main id="galeria" class="grade-produtos">
      <div class="produto saias" data-nome="Saia Longa">
        <img src="https://via.placeholder.com/200x250?text=Saia+1" alt="Saia 1" />
        <p>Saia Longa</p>
        <button onclick="adicionarAoCarrinho('Saia Longa')" class="btn btn-carrinho">Adicionar ao carrinho</button>
      </div>
      <div class="produto blusas" data-nome="Blusa">
        <img src="https://via.placeholder.com/200x250?text=Blusa+1" alt="Blusa 1" />
        <p>Blusa</p>
        <button onclick="adicionarAoCarrinho('Blusa')" class="btn btn-carrinho">Adicionar ao carrinho</button>
      </div>
      <div class="produto vestidos" data-nome="Vestido Floral">
        <img src="https://via.placeholder.com/200x250?text=Vestido+1" alt="Vestido 1" />
        <p>Vestido Floral</p>
        <button onclick="adicionarAoCarrinho('Vestido Floral')" class="btn btn-carrinho">Adicionar ao carrinho</button>
      </div>
      <div class="produto camisas" data-nome="Camisa">
        <img src="https://via.placeholder.com/200x250?text=Camisa+1" alt="Camisa 1" />
        <p>Camisa</p>
        <button onclick="adicionarAoCarrinho('Camisa')" class="btn btn-carrinho">Adicionar ao carrinho</button>
      </div>
      <div class="produto saias" data-nome="Saia Longa">
        <img src="https://via.placeholder.com/200x250?text=Saia+1" alt="Saia 1" />
        <p>Saia Longa</p>
        <button onclick="adicionarAoCarrinho('Saia Longa')" class="btn btn-carrinho">Adicionar ao carrinho</button>
      </div>
      <div class="produto blusas" data-nome="Blusa">
        <img src="https://via.placeholder.com/200x250?text=Blusa+1" alt="Blusa 1" />
        <p>Blusa</p>
        <button onclick="adicionarAoCarrinho('Blusa')" class="btn btn-carrinho">Adicionar ao carrinho</button>
      </div>
      <div class="produto vestidos" data-nome="Vestido Floral">
        <img src="https://via.placeholder.com/200x250?text=Vestido+1" alt="Vestido 1" />
        <p>Vestido Floral</p>
        <button onclick="adicionarAoCarrinho('Vestido Floral')" class="btn btn-carrinho">Adicionar ao carrinho</button>
      </div>
      <div class="produto camisas" data-nome="Camisa">
        <img src="https://via.placeholder.com/200x250?text=Camisa+1" alt="Camisa 1" />
        <p>Camisa</p>
        <button onclick="adicionarAoCarrinho('Camisa')" class="btn btn-carrinho">Adicionar ao carrinho</button>
      </div>
    </main>
  </section>

  <section class="depoimentos" id="depoimentos">
    <h2>O que nossas clientes dizem</h2>
    <div class="cards">
      <div class="card">
        <p>"Amei minhas roupas! Estilo e conforto em um só lugar."</p>
        <span>— Juliana M.</span>
      </div>
      <div class="card">
        <p>"Atendimento ótimo e peças maravilhosas, virei cliente fiel."</p>
        <span>— Renata F.</span>
      </div>
      <div class="card">
        <p>"Recebi elogios o dia todo! Super recomendo a loja."</p>
        <span>— Camila S.</span>
      </div>
    </div>
  </section>

  <section class="contato" id="contato">
    <h2>Fale conosco</h2>
    <form id="form-contato" onsubmit="return enviarEmail(event)">
      <input type="text" placeholder="Seu nome" name="nome" required />
      <input type="email" placeholder="Seu e-mail" name="email" required />
      <textarea placeholder="Monte seu condicional" name="mensagem" required></textarea>
      <button type="submit" class="btn">Enviar</button>
    </form>
  </section>

  <footer>
    <p>&copy; 2025 Gi Fashion. Todos os direitos reservados.</p>
  </footer>

  <!-- Modal único de Login/Cadastro -->
  <div id="auth-modal">
    <div>
      <button class="close-btn" onclick="fecharAuthModal()">✖</button>
      <div class="tabs">
        <button id="btn-login-tab" onclick="mostrarLogin()" class="active">Entrar</button>
        <button id="btn-cadastro-tab" onclick="mostrarCadastro()">Cadastrar</button>
      </div>

      <!-- Formulário Login -->
      <div id="form-login">
        <h3 style="text-align:center; font-family:'Cormorant Garamond', serif; font-style:italic; color:#c94f7c; margin-bottom:20px;">Entre na sua conta</h3>
        <input id="login-nome" type="text" placeholder="Seu nome ou e-mail" />
        <button onclick="fazerLogin()" class="btn">Entrar</button>
      </div>

      <!-- Formulário Cadastro -->
      <div id="form-cadastro" style="display:none;">
        <h3 style="text-align:center; font-family:'Cormorant Garamond', serif; font-style:italic; color:#c94f7c; margin-bottom:20px;">Crie sua conta</h3>
        <form
          id="cadastro-form"
          action="https://formsubmit.co/isabellacandido007@gmail.com"
          method="POST"
          style="display:flex; flex-direction:column; gap:12px;"
        >
          <input type="text" name="nome" placeholder="Seu nome completo" required />
          <input type="text" name="usuario" placeholder="Nome de usuário" required />
          <input type="tel" name="whatsapp" placeholder="WhatsApp com DDD" required />
          <input type="email" name="email" placeholder="Seu e-mail" required />

          <!-- Campos ocultos -->
          <input type="hidden" name="_subject" value="Novo Cadastro no Gi Fashion" />
          <input type="hidden" name="_captcha" value="false" />
          <button type="submit" id="btn-enviar-cadastro" class="btn">Cadastrar</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal / caixa do carrinho -->
  <div
    id="cart-modal"
    style="
      display: none;
      position: fixed;
      top: 60px;
      right: 20px;
      width: 350px;
      max-height: 500px;
      overflow-y: auto;
      background: #fff;
      border: 1px solid #ffb6c1;
      border-radius: 10px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      padding: 15px;
      z-index: 1100;
    "
  >
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <h3 style="color: #c94f7c;">🛍️ Seu Carrinho</h3>
      <button onclick="fecharCarrinho()" style="background: none; border: none; font-size: 18px; cursor: pointer; color: #a61e4d;">
        ✖
      </button>
    </div>
    <div id="cart-items" style="margin-top: 15px;"></div>
    <button onclick="finalizarCompra()" class="btn" style="width: 100%; margin-top: 15px;">Comprar pelo WhatsApp</button>
  </div>

  <!-- Notificação de item adicionado -->
  <div
    id="notificacao"
    style="
      position: fixed;
      top: 20px;
      right: 20px;
      background: #fff0f5;
      border: 1px solid #ffb6c1;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      z-index: 2000;
      color: #c94f7c;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      display: none;
    "
  >
    <span id="notificacao-texto"></span>
    <button onclick="fecharNotificacao()">✖</button>
  </div>

  <script>
  let carrinho = [];
  let usuarioAtual = null;
  let timeoutNotificacao;

  function atualizarContadorCarrinho() {
    document.getElementById('cart-count').textContent = carrinho.length;
  }

  function adicionarAoCarrinho(nomeProduto) {
    const produtos = document.querySelectorAll(".produto");
    let imagem = "";

    produtos.forEach(prod => {
      if (prod.getAttribute("data-nome") === nomeProduto) {
        imagem = prod.querySelector("img").src;
      }
    });

    carrinho.push({ nome: nomeProduto, imagem });
    atualizarContadorCarrinho();
    salvarCarrinho();
    mostrarNotificacao(`"${nomeProduto}" adicionado ao carrinho!`);
  }

  function mostrarCarrinho() {
    const modal = document.getElementById('cart-modal');
    const container = document.getElementById('cart-items');
    container.innerHTML = '';

    if (carrinho.length === 0) {
      container.innerHTML = '<p style="color:#666; text-align:center">Seu carrinho está vazio.</p>';
    } else {
      const counts = {};
      carrinho.forEach(item => {
        const key = item.nome;
        if (!counts[key]) counts[key] = { ...item, quantidade: 1 };
        else counts[key].quantidade++;
      });

      for (const [nome, item] of Object.entries(counts)) {
        const div = document.createElement('div');
        div.style = 'display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; border-bottom:1px solid #f9cbd8; padding-bottom:10px;';

        div.innerHTML = `
          <div style="display:flex; align-items:center;">
            <img src="${item.imagem}" style="width:60px; height:75px; object-fit:cover; border-radius:8px; margin-right:10px;">
            <div>
              <p style="margin:0; font-weight:bold;">${item.nome}</p>
              <div style="display:flex; align-items:center; gap:6px; margin-top:5px;">
                <button onclick="alterarQuantidade('${item.nome}', -1)" style="background:#f0d6df; border:none; padding:4px 10px; border-radius:6px; font-weight:bold;">−</button>
                <span style="font-size:15px;">${item.quantidade}</span>
                <button onclick="alterarQuantidade('${item.nome}', 1)" style="background:#f0d6df; border:none; padding:4px 10px; border-radius:6px; font-weight:bold;">+</button>
              </div>
            </div>
          </div>
        `;
        container.appendChild(div);
      }
    }
    modal.style.display = 'block';
  }

  function fecharCarrinho() {
    document.getElementById('cart-modal').style.display = 'none';
  }

  function alterarQuantidade(nomeProduto, operacao) {
    if (operacao === 1) {
      const item = carrinho.find(i => i.nome === nomeProduto);
      if (item) carrinho.push({ ...item });
    } else {
      const index = carrinho.findIndex(i => i.nome === nomeProduto);
      if (index !== -1) carrinho.splice(index, 1);
    }
    salvarCarrinho();
    atualizarContadorCarrinho();
    mostrarCarrinho();
  }

  function finalizarCompra() {
  if (carrinho.length === 0) {
    mostrarNotificacao('Carrinho vazio, adicione itens para finalizar a compra!');
    return;
  }

  if (!usuarioAtual) {
    abrirAuthModal();
    mostrarNotificacao('Cadastre-se para finalizar a compra.');
    return;
  }

  const counts = {};
  carrinho.forEach(item => {
    const key = item.nome;
    counts[key] = (counts[key] || 0) + 1;
  });

  let mensagem = 'Olá, gostaria de comprar:%0A';
  for (const [nome, qtd] of Object.entries(counts)) {
    mensagem += `- ${nome} (x${qtd})%0A`;
  }

  window.open(`https://wa.me/5545999279284?text=${mensagem}`, '_blank');
}

  function mostrarNotificacao(msg) {
    const box = document.getElementById('notificacao');
    const texto = document.getElementById('notificacao-texto');
    texto.textContent = msg;
    box.style.display = 'flex';

    if (timeoutNotificacao) clearTimeout(timeoutNotificacao);
    timeoutNotificacao = setTimeout(() => box.style.display = 'none', 4000);
  }

  function salvarCarrinho() {
    if (!usuarioAtual) return;
    localStorage.setItem(`carrinho_${usuarioAtual}`, JSON.stringify(carrinho));
  }

  function carregarCarrinho() {
    if (!usuarioAtual) return;
    const dados = localStorage.getItem(`carrinho_${usuarioAtual}`);
    if (dados) {
      carrinho = JSON.parse(dados);
      atualizarContadorCarrinho();
    }
  }

  // --- MODAL LOGIN / CADASTRO ÚNICO ---
  function abrirAuthModal() {
    document.getElementById('auth-modal').style.display = 'flex';
    mostrarLogin(); // padrão abrir no login
  }

  function fecharAuthModal() {
    document.getElementById('auth-modal').style.display = 'none';
  }

  function mostrarLogin() {
    document.getElementById('form-login').style.display = 'block';
    document.getElementById('form-cadastro').style.display = 'none';
    document.getElementById('btn-login-tab').classList.add('active');
    document.getElementById('btn-cadastro-tab').classList.remove('active');
  }

  function mostrarCadastro() {
    document.getElementById('form-login').style.display = 'none';
    document.getElementById('form-cadastro').style.display = 'block';
    document.getElementById('btn-login-tab').classList.remove('active');
    document.getElementById('btn-cadastro-tab').classList.add('active');
  }

  function fazerLogin() {
    const nome = document.getElementById('login-nome').value.trim();
    const cadastro = localStorage.getItem(`cadastro_${nome}`);
    if (cadastro) {
      usuarioAtual = nome;
      fecharAuthModal();
      mostrarNotificacao(`Bem-vindo(a), ${usuarioAtual}`);
      carregarCarrinho();
    } else {
      mostrarNotificacao('Usuário não encontrado.');
    }
  }

  function toggleColecao(event) {
  event.preventDefault(); // evita o redirecionamento da âncora
  const menu = document.getElementById('colecao-menu');
  menu.classList.toggle('colecao-oculto');
}

function mostrarCategoria(categoria) {
  const produtos = document.querySelectorAll('.produto');

  produtos.forEach(prod => {
    if (prod.classList.contains(categoria)) {
      prod.style.display = 'block';
    } else {
      prod.style.display = 'none';
    }
  });

  document.getElementById('colecao-menu').classList.add('colecao-oculto');
}

function mostrarTodos() {
  const produtos = document.querySelectorAll('.produto');
  produtos.forEach(prod => {
    prod.style.display = 'block';
  });
  document.getElementById('colecao-menu').classList.add('colecao-oculto');
}

function mostrarNotificacao(msg) {
  const box = document.getElementById('notificacao');
  const texto = document.getElementById('notificacao-texto');
  texto.textContent = msg;
  box.style.display = 'flex';

  // Limpa qualquer timeout anterior para não fechar antes do tempo
  if (timeoutNotificacao) clearTimeout(timeoutNotificacao);

  // Fecha a notificação automaticamente após 4 segundos
  timeoutNotificacao = setTimeout(() => {
    box.style.display = 'none';
  }, 4000);
}

function fecharNotificacao() {
  const box = document.getElementById('notificacao');
  box.style.display = 'none';
  if (timeoutNotificacao) clearTimeout(timeoutNotificacao);
}
</script>

<script>
  const cadastroForm = document.getElementById("cadastro-form");

  cadastroForm.addEventListener("submit", function (event) {
    event.preventDefault(); // impedir envio automático

    const dados = new FormData(cadastroForm);

    fetch(cadastroForm.action, {
      method: "POST",
      body: dados
    })
    .then(response => {
      if (response.ok) {
        // Mostra o bloquinho de sucesso
        document.getElementById("sucesso-cadastro").style.display = "block";

        // Fecha o modal
        fecharAuthModal();

        // Limpa o formulário
        cadastroForm.reset();

        // Simula login automático
        const nome = dados.get("usuario");
        localStorage.setItem(`cadastro_${nome}`, JSON.stringify(Object.fromEntries(dados.entries())));
        usuarioAtual = nome;
        salvarCarrinho();
        atualizarContadorCarrinho();
        mostrarNotificacao(`Bem-vindo(a), ${usuarioAtual}`);
      } else {
        alert("Erro ao cadastrar. Tente novamente.");
      }
    })
    .catch(() => {
      alert("Erro ao conectar. Tente novamente.");
    });
  });

  function fecharPopupCadastro() {
    document.getElementById("sucesso-cadastro").style.display = "none";
  }
</script>

  <!-- Modais de login e cadastro -->
  <div id="login-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#00000066; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; border-radius:8px;">
      <h3>Entrar</h3>
      <input id="login-nome" placeholder="Seu nome" />
      <button onclick="fazerLogin()">Entrar</button>
    </div>
  </div>

  <div id="cadastro-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#00000066; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; border-radius:8px;">
      <h3>Cadastro</h3>
      <input id="cadastro-nome" placeholder="Seu nome" />
      <button onclick="salvarCadastro()">Cadastrar</button>
    </div>
  </div>

  <div id="sucesso-cadastro" style="
  display: none;
  position: fixed;
  top: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #fff0f5;
  border: 2px solid #c94f7c;
  padding: 25px 30px;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(0,0,0,0.2);
  z-index: 4000;
  text-align: center;
">
  <p style="margin-bottom: 20px; font-weight: bold; color: #c94f7c;">✅ Cadastro realizado com sucesso!</p>
  <button onclick="fecharPopupCadastro()" style="
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background-color: #c94f7c;
    color: white;
    font-weight: bold;
    cursor: pointer;
  ">OK</button>
</div>

  </body>

</html>

